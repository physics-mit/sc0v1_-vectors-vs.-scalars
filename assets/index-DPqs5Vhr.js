(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(t){if(t.ep)return;t.ep=!0;const e=r(t);fetch(t.href,e)}})();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */const f=25,s=20,d=20,p=0,T=40,x=20,S=6;let m,i,w,P,E,y,I="scalar",h=[],g=[],C="";document.addEventListener("DOMContentLoaded",()=>{if(m=document.getElementById("simulationCanvas"),w=document.getElementById("fieldType"),P=document.getElementById("generateScenario"),E=document.getElementById("current-scenario-type"),y=document.getElementById("tooltip"),!m||!w||!P||!E||!y){console.error("Essential DOM elements not found!");return}m.width=d*f,m.height=s*f;const o=m.getContext("2d");if(!o){console.error("Failed to get 2D rendering context");return}i=o,w.addEventListener("change",R),P.addEventListener("click",D),m.addEventListener("mousemove",F),m.addEventListener("mouseout",A),D()});function R(){I=w.value,D()}function D(){I==="scalar"?O():$(),b(),X()}function F(o){const n=m.getBoundingClientRect(),r=o.clientX-n.left,l=o.clientY-n.top,t=Math.floor(r/f),e=Math.floor(l/f);if(t>=0&&t<d&&e>=0&&e<s){let a="";if(I==="scalar"&&h[e]&&h[e][t]!==void 0)a=`Temp: ${h[e][t].toFixed(1)}°C`;else if(I==="vector"&&g[e]&&g[e][t]){const c=g[e][t];a=`Wind: ${c.magnitude.toFixed(1)} m/s, ${c.angle.toFixed(0)}°`}a?(y.style.opacity="1",y.style.left=`${o.clientX+10}px`,y.style.top=`${o.clientY-20}px`,y.textContent=a):y.style.opacity="0"}else y.style.opacity="0"}function A(){y.style.opacity="0"}function O(){h=Array(s).fill(null).map(()=>Array(d).fill(0));const o=Math.random();if(o<.33){C="Random Temperature Distribution";for(let n=0;n<s;n++)for(let r=0;r<d;r++)h[n][r]=p+Math.random()*(T-p)}else if(o<.66){const n=Math.random(),r=p+Math.random()*(T/2),l=r+Math.random()*(T/2);C=`Linear Temperature Gradient (${n<.5?"Horizontal":"Vertical"})`;for(let t=0;t<s;t++)for(let e=0;e<d;e++){let a;n<.5?a=e/(d-1):a=t/(s-1),h[t][e]=r+(l-r)*a,h[t][e]=Math.max(p,Math.min(T,h[t][e]))}}else{const n=Math.random()<.5?"Hot":"Cold";C=`Central ${n} Spot`;const r=Math.floor(s/2),l=Math.floor(d/2),t=(T-p)*.8,e=p+(T-p)*.3*Math.random();for(let a=0;a<s;a++)for(let c=0;c<d;c++){const u=Math.sqrt(Math.pow(a-r,2)+Math.pow(c-l,2)),M=Math.max(s,d)/3;let v=Math.max(0,1-u/M);n==="Hot"?h[a][c]=e+v*t:h[a][c]=e+t-v*t,h[a][c]=Math.max(p,Math.min(T,h[a][c]))}}}function $(){g=Array(s).fill(null).map(()=>Array(d).fill(null));const o=Math.random();if(o<.33){C="Uniform Wind Flow";const n=Math.random()*360,r=Math.random()*x*.5+x*.2;for(let l=0;l<s;l++)for(let t=0;t<d;t++)g[l][t]={magnitude:r,angle:n}}else if(o<.66){const n=Math.random()<.5?1:-1;C=`Rotational Flow (${n===1?"CCW":"CW"})`;const r=s/2-.5,l=d/2-.5;for(let t=0;t<s;t++)for(let e=0;e<d;e++){const a=t-r,c=e-l,u=Math.sqrt(c*c+a*a);if(u<.1){g[t][e]={magnitude:0,angle:0};continue}let M=Math.atan2(a,c)*180/Math.PI+90*n;M<0&&(M+=360),M>=360&&(M-=360);const v=Math.max(s,d)/2,L=Math.min(x,u/v*x*.8);g[t][e]={magnitude:L,angle:M}}}else{const n=Math.random()<.5?"Converging":"Diverging";C=`${n} Wind Flow`;const r=Math.floor(Math.random()*s),l=Math.floor(Math.random()*d);for(let t=0;t<s;t++)for(let e=0;e<d;e++){const a=t-r,c=e-l,u=Math.sqrt(c*c+a*a);if(u<.1){g[t][e]={magnitude:0,angle:0};continue}let M;n==="Converging"?M=Math.atan2(-a,-c)*180/Math.PI:M=Math.atan2(a,c)*180/Math.PI,M<0&&(M+=360);const v=Math.min(x,x*(1-u/Math.max(s,d))*.9);g[t][e]={magnitude:Math.max(0,v),angle:M}}}}function b(){i.clearRect(0,0,m.width,m.height),i.fillStyle="#f9f9f9",i.fillRect(0,0,m.width,m.height),i.strokeStyle="#e0e0e0",i.lineWidth=.5;for(let o=0;o<=s;o++)i.beginPath(),i.moveTo(0,o*f),i.lineTo(m.width,o*f),i.stroke();for(let o=0;o<=d;o++)i.beginPath(),i.moveTo(o*f,0),i.lineTo(o*f,m.height),i.stroke();I==="scalar"?W():_()}function W(){if(h.length)for(let o=0;o<s;o++)for(let n=0;n<d;n++){const r=h[o][n];i.fillStyle=B(r),i.fillRect(n*f+1,o*f+1,f-2,f-2)}}function _(){if(g.length)for(let o=0;o<s;o++)for(let n=0;n<d;n++){const r=g[o][n];if(r&&r.magnitude>.01){const l=n*f+f/2,t=o*f+f/2;N(l,t,r.magnitude,r.angle)}}}function B(o){const n=Math.max(0,Math.min(1,(o-p)/(T-p)));let r,l,t;if(n<.25){const e=n/.25;r=0,l=Math.floor(255*e),t=255}else if(n<.5){const e=(n-.25)/.25;r=0,l=255,t=Math.floor(255*(1-e))}else if(n<.75){const e=(n-.5)/.25;r=Math.floor(255*e),l=255,t=0}else{const e=(n-.75)/.25;r=255,l=Math.floor(255*(1-e)),t=0}return`rgb(${r},${l},${t})`}function N(o,n,r,l){const t=l*Math.PI/180,a=f*.4*(r/x);if(a<1)return;const c=o+a*Math.cos(t),u=n+a*Math.sin(t);i.beginPath(),i.strokeStyle="#333333",i.lineWidth=Math.max(1,Math.min(3,r/x*3)),i.moveTo(o,n),i.lineTo(c,u),i.stroke(),i.beginPath(),i.moveTo(c,u),i.lineTo(c-S*Math.cos(t-Math.PI/6),u-S*Math.sin(t-Math.PI/6)),i.moveTo(c,u),i.lineTo(c-S*Math.cos(t+Math.PI/6),u-S*Math.sin(t+Math.PI/6)),i.stroke()}function X(){E&&(E.textContent=C||"N/A")}
